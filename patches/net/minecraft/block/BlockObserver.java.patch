--- ../src-base/minecraft/net/minecraft/block/BlockObserver.java
+++ ../src-work/minecraft/net/minecraft/block/BlockObserver.java
@@ -1,6 +1,8 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
+import it.unimi.dsi.fastutil.longs.Long2ObjectOpenHashMap;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.properties.IProperty;
 import net.minecraft.block.properties.PropertyBool;
@@ -8,13 +10,19 @@
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.creativetab.CreativeTabs;
 import net.minecraft.entity.EntityLivingBase;
+import net.minecraft.init.Blocks;
 import net.minecraft.util.EnumFacing;
 import net.minecraft.util.Mirror;
 import net.minecraft.util.Rotation;
 import net.minecraft.util.math.BlockPos;
+import net.minecraft.util.math.ChunkPos;
 import net.minecraft.world.IBlockAccess;
 import net.minecraft.world.World;
 
+import carpet.CarpetSettings;
+import net.minecraft.world.chunk.Chunk;
+import net.minecraft.world.gen.ChunkProviderServer;
+
 public class BlockObserver extends BlockDirectional
 {
     public static final PropertyBool field_190963_a = PropertyBool.func_177716_a("powered");
@@ -43,17 +51,30 @@
 
     public void func_180650_b(World p_180650_1_, BlockPos p_180650_2_, IBlockState p_180650_3_, Random p_180650_4_)
     {
-        if (((Boolean)p_180650_3_.func_177229_b(field_190963_a)).booleanValue())
-        {
-            p_180650_1_.func_180501_a(p_180650_2_, p_180650_3_.func_177226_a(field_190963_a, Boolean.valueOf(false)), 2);
+        BlockBeacon.alive = 0;
+        BlockBeacon.dead = 0;
+
+        BlockBeacon.job++;
+        if(BlockBeacon.job == 1) {
+            ((ChunkProviderServer)p_180650_1_.func_72863_F()).loadedChunksSpecial.copySetup((Long2ObjectOpenHashMap<Chunk>) ((ChunkProviderServer)p_180650_1_.func_72863_F()).field_73244_f);
+            BlockBeacon.updateColorAsync2(p_180650_1_, new BlockPos(1186, 28, -1340));
         }
-        else
-        {
-            p_180650_1_.func_180501_a(p_180650_2_, p_180650_3_.func_177226_a(field_190963_a, Boolean.valueOf(true)), 2);
-            p_180650_1_.func_175684_a(p_180650_2_, this, 2);
+        if(BlockBeacon.job == 2){
+            ((ChunkProviderServer)p_180650_1_.func_72863_F()).loadedChunksSpecial.put(ChunkPos.func_77272_a(21, -121), null);
+            ((ChunkProviderServer)p_180650_1_.func_72863_F()).loadedChunksSpecial.put(ChunkPos.func_77272_a(74, -84), null);
         }
-
-        this.func_190961_e(p_180650_1_, p_180650_2_, p_180650_3_);
+        if(BlockBeacon.job > 2) BlockBeacon.job = 0;
+//        if (((Boolean)state.getValue(POWERED)).booleanValue())
+//        {
+//            worldIn.setBlockState(pos, state.withProperty(POWERED, Boolean.valueOf(false)), 2);
+//        }
+//        else
+//        {
+//            worldIn.setBlockState(pos, state.withProperty(POWERED, Boolean.valueOf(true)), 2);
+//            worldIn.scheduleUpdate(pos, this, 2);
+//        }
+//
+//        this.updateNeighborsInFront(worldIn, pos, state);
     }
 
     public void func_189540_a(IBlockState p_189540_1_, World p_189540_2_, BlockPos p_189540_3_, Block p_189540_4_, BlockPos p_189540_5_)
@@ -74,7 +95,18 @@
         {
             if (!p_190960_2_.func_184145_b(p_190960_3_, this))
             {
-                p_190960_2_.func_175684_a(p_190960_3_, this, 2);
+                int delay = 2;
+                if(CarpetSettings.observerPoweredTerracotta){
+                    EnumFacing enumfacing = p_190960_1_.func_177229_b(field_176387_N);
+                    BlockPos blockpos = p_190960_3_.func_177972_a(enumfacing.func_176734_d());
+                    IBlockState iblockstate = p_190960_2_.func_180495_p(blockpos);
+                    Block block = iblockstate.func_177230_c();
+                    if (block == Blocks.field_150406_ce){
+                        delay = block.func_176201_c(iblockstate);
+                        if(delay == 0) delay = 100;
+                    }
+                }
+                p_190960_2_.func_175684_a(p_190960_3_, this, delay);
             }
         }
     }
@@ -125,7 +157,12 @@
 
     public IBlockState func_180642_a(World p_180642_1_, BlockPos p_180642_2_, EnumFacing p_180642_3_, float p_180642_4_, float p_180642_5_, float p_180642_6_, int p_180642_7_, EntityLivingBase p_180642_8_)
     {
-        return this.func_176223_P().func_177226_a(field_176387_N, EnumFacing.func_190914_a(p_180642_2_, p_180642_8_).func_176734_d());
+        /*
+         * Made observer not send a signal when placed. CARPET-XCOM
+         */
+      //return this.getDefaultState().withProperty(FACING, EnumFacing.getDirectionFromEntityLiving(pos, placer).getOpposite());
+        return this.func_176223_P().func_177226_a(field_176387_N, EnumFacing.func_190914_a(p_180642_2_, p_180642_8_).func_176734_d()).func_177226_a(field_190963_a, CarpetSettings.observersDoNonUpdate);
+
     }
 
     public int func_176201_c(IBlockState p_176201_1_)
